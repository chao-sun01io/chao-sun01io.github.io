<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="noodp"><title>Build docker image and run docker container on MacOS M1 - Chao's garden</title><meta name=Description content="Chao Sun's garden. It is inspired by digital garden concept, and the most importance philosphy is 'don't have to be perfect'. With this spirit, each posts here can be imperfect or incompelete, and hopeful it grows up and develops as time goes "><meta property="og:title" content="Build docker image  and run docker container on MacOS M1">
<meta property="og:description" content="Build docker image for macOS M1 docker buildx build --platform linux/arm64 --load -t rcore_lab . Explanation docker buildx build: This initiates the Docker Buildx build process. Docker Buildx is a CLI plugin that extends the functionality of Docker&rsquo;s build command, allowing for advanced features like multi-platform builds, cache import/export, and more.
--platform linux/arm64: This flag specifies the target platform for the build. In this case, it is set to linux/arm64, which means the Docker image will be built for the ARM64 architecture on a Linux operating system."><meta property="og:type" content="article"><meta property="og:url" content="https://example.org/posts/build-docker-image-and-run-docker-container-on-macos-m1/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-03-03T14:31:33+00:00"><meta property="article:modified_time" content="2024-10-21T20:18:28+00:00"><meta property="og:site_name" content="Chao's Garden"><meta name=twitter:card content="summary"><meta name=twitter:title content="Build docker image  and run docker container on MacOS M1"><meta name=twitter:description content="Build docker image for macOS M1 docker buildx build --platform linux/arm64 --load -t rcore_lab . Explanation docker buildx build: This initiates the Docker Buildx build process. Docker Buildx is a CLI plugin that extends the functionality of Docker&rsquo;s build command, allowing for advanced features like multi-platform builds, cache import/export, and more.
--platform linux/arm64: This flag specifies the target platform for the build. In this case, it is set to linux/arm64, which means the Docker image will be built for the ARM64 architecture on a Linux operating system."><meta name=application-name content="Chao's garden"><meta name=apple-mobile-web-app-title content="Chao's garden"><meta name=theme-color content="#ffffff"><meta name=msapplication-TileColor content="#da532c"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link rel=manifest href=/site.webmanifest><link rel=canonical href=https://example.org/posts/build-docker-image-and-run-docker-container-on-macos-m1/><link rel=prev href=https://example.org/posts/preface/><link rel=next href=https://example.org/posts/string-split-in-c++/><link rel=stylesheet href=/css/style.min.css><link rel=preload href=https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css as=style onload='this.onload=null,this.rel="stylesheet"'><noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css></noscript><link rel=preload href=https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css as=style onload='this.onload=null,this.rel="stylesheet"'><noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css></noscript><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"Build docker image  and run docker container on MacOS M1","inLanguage":"en","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/example.org\/posts\/build-docker-image-and-run-docker-container-on-macos-m1\/"},"genre":"posts","wordcount":444,"url":"https:\/\/example.org\/posts\/build-docker-image-and-run-docker-container-on-macos-m1\/","datePublished":"2024-03-03T14:31:33+00:00","dateModified":"2024-10-21T20:18:28+00:00","publisher":{"@type":"Organization","name":""},"author":{"@type":"Person","name":"Chao"},"description":""}</script></head><body data-header-desktop=fixed data-header-mobile=auto><script type=text/javascript>(window.localStorage&&localStorage.getItem("theme")?localStorage.getItem("theme")==="dark":"auto"==="auto"?window.matchMedia("(prefers-color-scheme: dark)").matches:"auto"==="dark")&&document.body.setAttribute("theme","dark")</script><div id=mask></div><div class=wrapper><header class=desktop id=header-desktop><div class=header-wrapper><div class=header-title><a href=/ title="Chao's garden">Chao's Garden</a></div><div class=menu><div class=menu-inner><a class=menu-item href=/posts/>Posts </a><a class=menu-item href=/tags/>Tags </a><span class="menu-item delimiter"></span><a href=javascript:void(0); class="menu-item theme-switch" title="Switch Theme">
<i class="fas fa-adjust fa-fw" aria-hidden=true></i></a></div></div></div></header><header class=mobile id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/ title="Chao's garden">Chao's Garden</a></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><div class=menu id=menu-mobile><a class=menu-item href=/posts/ title>Posts</a><a class=menu-item href=/tags/ title>Tags</a><a href=javascript:void(0); class="menu-item theme-switch" title="Switch Theme">
<i class="fas fa-adjust fa-fw" aria-hidden=true></i></a></div></div></header><main class=main><div class=container><div class=toc id=toc-auto><h2 class=toc-title>Contents</h2><div class=toc-content id=toc-content-auto></div></div><article class="page single"><h1 class="single-title animate__animated animate__flipInX">Build docker image and run docker container on MacOS M1</h1><div class=post-meta><div class=post-meta-line><span class=post-author><a href=/ title=Author rel=author class=author><i class="fas fa-user-circle fa-fw" aria-hidden=true></i>Chao</a></span></div><div class=post-meta-line><i class="far fa-calendar-alt fa-fw" aria-hidden=true></i>&nbsp;<time datetime=2024-03-03>2024-03-03</time>&nbsp;<i class="fas fa-pencil-alt fa-fw" aria-hidden=true></i>&nbsp;444 words&nbsp;
<i class="far fa-clock fa-fw" aria-hidden=true></i>&nbsp;3 minutes&nbsp;</div></div><div class="details toc" id=toc-static data-kept><div class="details-summary toc-title"><span>Contents</span>
<span><i class="details-icon fas fa-angle-right" aria-hidden=true></i></span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents><ul><li><a href=#build-docker-image-for-macos-m1>Build docker image for macOS M1</a><ul><li><a href=#explanation>Explanation</a></li></ul></li><li><a href=#run-docker-container>Run docker container</a><ul><li><a href=#explanation-1>Explanation</a></li></ul></li><li><a href=#pro-tips>Pro-tips</a></li></ul></nav></div></div><div class=content id=content><h2 id=build-docker-image-for-macos-m1>Build docker image for macOS M1</h2><pre tabindex=0><code>docker buildx build --platform linux/arm64 --load -t rcore_lab .
</code></pre><h3 id=explanation>Explanation</h3><ul><li><p><code>docker buildx build</code>: This initiates the Docker Buildx build process. Docker Buildx is a CLI plugin that extends the functionality of Docker&rsquo;s build command, allowing for advanced features like multi-platform builds, cache import/export, and more.</p></li><li><p><code>--platform linux/arm64</code>: This flag specifies the target platform for the build. In this case, it is set to <code>linux/arm64</code>, which means the Docker image will be built for the ARM64 architecture on a Linux operating system. This is particularly useful when you need to create images that run on different hardware architectures, such as ARM-based processors.</p></li><li><p><code>--load</code>: This option tells Docker to load the built image into the local Docker image store after the build is complete. This is useful for testing the image locally or for further development.</p></li><li><p><code>-t rcore_lab</code>: The <code>-t</code> flag is used to tag the image with a name. In this case, the image is tagged as <code>rcore_lab</code>. Tagging helps in identifying and managing Docker images, especially when you have multiple images in your local repository.</p></li></ul><p>Putting it all together, this command builds a Docker image for the ARM64 architecture on a Linux platform, loads the image into the local Docker image store, and tags it as <code>rcore_lab</code>. This is a powerful way to ensure that your Docker images are compatible with different hardware architectures and can be easily managed and tested locally.</p><h2 id=run-docker-container>Run docker container</h2><pre tabindex=0><code>docker run -itd -v $(pwd):/mnt -w /mnt --name rcore_lab_container rcore_lab bash
</code></pre><h3 id=explanation-1>Explanation</h3><ul><li><code>-itd</code>: This combination of flags runs the container in an interactive mode (-i), allocates a pseudo-TTY (-t), and runs the container in detached mode (-d), meaning it runs in the background.</li><li><code>-v $(pwd):/mnt</code>: This option mounts the current working directory ($(pwd)) on the host machine to the /mnt directory inside the container. This allows the container to access and modify files in the host&rsquo;s current directory.</li><li><code>-w /mnt</code>: This sets the working directory inside the container to /mnt, which is where the host&rsquo;s current directory is mounted.</li><li><code>--name rcore_lab_container</code>: This assigns a name (rcore_lab_container) to the container, making it easier to reference in subsequent Docker commands.</li><li><code>rcore_lab</code>: This specifies the Docker image to use for creating the container. In this case, it is an image named rcore_lab.</li><li><code>bash</code> runs the Bash shell inside the container, allowing for interactive command execution.</li></ul><p>Overall, this command is useful for setting up a Docker container that has access to the host&rsquo;s current directory, runs in the background, and provides an interactive shell for further operations.</p><h2 id=pro-tips>Pro-tips</h2><p>Use VSCode + Remote-Container extension to do the development and it feels like working in a native Ubuntu environment.</p></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span>Updated on 2024-10-21</span></div></div><div class=post-info-line><div class=post-info-md></div><div class=post-info-share><span><a href=javascript:void(0); title="Share on Twitter" data-sharer=twitter data-url=https://example.org/posts/build-docker-image-and-run-docker-container-on-macos-m1/ data-title="Build docker image  and run docker container on MacOS M1"><i class="fab fa-twitter fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="Share on Facebook" data-sharer=facebook data-url=https://example.org/posts/build-docker-image-and-run-docker-container-on-macos-m1/><i class="fab fa-facebook-square fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="Share on Hacker News" data-sharer=hackernews data-url=https://example.org/posts/build-docker-image-and-run-docker-container-on-macos-m1/ data-title="Build docker image  and run docker container on MacOS M1"><i class="fab fa-hacker-news fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="Share on Line" data-sharer=line data-url=https://example.org/posts/build-docker-image-and-run-docker-container-on-macos-m1/ data-title="Build docker image  and run docker container on MacOS M1"><i data-svg-src=https://cdn.jsdelivr.net/npm/simple-icons@7.3.0/icons/line.svg aria-hidden=true></i></a><a href=javascript:void(0); title="Share on 微博" data-sharer=weibo data-url=https://example.org/posts/build-docker-image-and-run-docker-container-on-macos-m1/ data-title="Build docker image  and run docker container on MacOS M1"><i class="fab fa-weibo fa-fw" aria-hidden=true></i></a></span></div></div></div><div class=post-info-more><section class=post-tags></section><section><span><a href=javascript:void(0); onclick=window.history.back()>Back</a></span>&nbsp;|&nbsp;<span><a href=/>Home</a></span></section></div><div class=post-nav><a href=/posts/preface/ class=prev rel=prev title=Preface><i class="fas fa-angle-left fa-fw" aria-hidden=true></i>Preface</a>
<a href=/posts/string-split-in-c++/ class=next rel=next title="String split in C++">String split in C++<i class="fas fa-angle-right fa-fw" aria-hidden=true></i></a></div></div></article></div></main><footer class=footer><div class=footer-container><div class=footer-line>Powered by <a href=https://gohugo.io/ target=_blank rel="noopener noreffer" title="Hugo 0.122.0">Hugo</a> | Theme - <a href=https://github.com/dillonzq/LoveIt target=_blank rel="noopener noreffer" title="LoveIt 0.2.11"><i class="far fa-kiss-wink-heart fa-fw" aria-hidden=true></i> LoveIt</a></div><div class=footer-line itemscope itemtype=http://schema.org/CreativeWork><i class="far fa-copyright fa-fw" aria-hidden=true></i><span itemprop=copyrightYear>2023 - 2024</span><span class=author itemprop=copyrightHolder>&nbsp;<a href=/ target=_blank>Chao</a></span></div></div></footer></div><div id=fixed-buttons><a href=# id=back-to-top class=fixed-button title="Back to Top"><i class="fas fa-arrow-up fa-fw" aria-hidden=true></i>
</a><a href=# id=view-comments class=fixed-button title="View Comments"><i class="fas fa-comment fa-fw" aria-hidden=true></i></a></div><script type=text/javascript src=https://cdn.jsdelivr.net/npm/lazysizes@5.3.2/lazysizes.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/clipboard@2.0.11/dist/clipboard.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/sharer.js@0.5.1/sharer.min.js></script><script type=text/javascript>window.config={code:{copyTitle:"Copy to clipboard",maxShownLines:50},comment:{}}</script><script type=text/javascript src=/js/theme.min.js></script></body></html>